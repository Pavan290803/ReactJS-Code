{"ast":null,"code":"import 'focus-options-polyfill';\nimport React, { useEffect, useRef, useState, useCallback, memo, StrictMode } from 'react';\nimport { createPortal } from 'react-dom';\nimport { pseudoParentEl, getModalOverlayStyle, getModalContentStyle } from './helpers.js'; // https://github.com/streamich/react-use/blob/master/src/useEffectOnce.ts\n\nvar useEffectOnce = function useEffectOnce(effect) {\n  useEffect(effect, []); // eslint-disable-line\n}; // https://github.com/streamich/react-use/blob/master/src/useUnmount.ts\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nvar useUnmount = function useUnmount(fn) {\n  var fnRef = useRef(fn); // update the ref each render so if it change the newest callback will be invoked\n\n  fnRef.current = fn;\n  useEffectOnce(function () {\n    return function () {\n      return fnRef.current();\n    };\n  });\n}; // https://github.com/streamich/react-use/blob/master/src/useRafState.ts\n\n\nvar useRafState = function useRafState(initialState) {\n  var frame = useRef(0);\n\n  var _a = useState(initialState),\n      state = _a[0],\n      setState = _a[1];\n\n  var setRafState = useCallback(function (value) {\n    cancelAnimationFrame(frame.current);\n    frame.current = requestAnimationFrame(function () {\n      setState(value);\n    });\n  }, []);\n  useUnmount(function () {\n    cancelAnimationFrame(frame.current);\n  });\n  return [state, setRafState];\n}; // https://github.com/streamich/react-use/blob/master/src/useWindowSize.ts\n\n\nvar useWindowSize = function useWindowSize(initialWidth, initialHeight) {\n  if (initialWidth === void 0) {\n    initialWidth = Infinity;\n  }\n\n  if (initialHeight === void 0) {\n    initialHeight = Infinity;\n  }\n\n  var isBrowser = typeof window !== 'undefined';\n\n  var _a = useRafState({\n    width: isBrowser ? window.innerWidth : initialWidth,\n    height: isBrowser ? window.innerHeight : initialHeight\n  }),\n      state = _a[0],\n      setState = _a[1];\n\n  useEffect(function () {\n    if (isBrowser) {\n      var handler_1 = function handler_1() {\n        setState({\n          width: window.innerWidth,\n          height: window.innerHeight\n        });\n      };\n\n      window.addEventListener('resize', handler_1);\n      return function () {\n        window.removeEventListener('resize', handler_1);\n      };\n    }\n  }, [isBrowser, setState]);\n  return state;\n}; // https://github.com/streamich/react-use/blob/master/src/usePrevious.ts\n\n\nfunction usePrevious(state) {\n  var ref = useRef();\n  useEffect(function () {\n    ref.current = state;\n  });\n  return ref.current;\n}\n\nvar ControlledActivated = function ControlledActivated(_a) {\n  var children = _a.children,\n      _b = _a.closeText,\n      closeText = _b === void 0 ? 'Unzoom Image' : _b,\n      isActiveFromParent = _a.isActive,\n      onLoad = _a.onLoad,\n      onUnload = _a.onUnload,\n      onZoomChange = _a.onZoomChange,\n      _c = _a.overlayBgColorEnd,\n      overlayBgColorEnd = _c === void 0 ? 'rgba(255, 255, 255, 0.95)' : _c,\n      _d = _a.overlayBgColorStart,\n      overlayBgColorStart = _d === void 0 ? 'rgba(255, 255, 255, 0)' : _d,\n      parentRef = _a.parentRef,\n      _e = _a.portalEl,\n      portalEl = _e === void 0 ? document.body : _e,\n      _f = _a.scrollableEl,\n      scrollableEl = _f === void 0 ? window : _f,\n      _g = _a.transitionDuration,\n      transitionDuration = _g === void 0 ? 300 : _g,\n      _h = _a.zoomMargin,\n      zoomMargin = _h === void 0 ? 0 : _h,\n      _j = _a.zoomZindex,\n      zoomZindex = _j === void 0 ? 2147483647 : _j;\n  var btnRef = useRef(null);\n\n  var _k = useState(0),\n      forceUpdate = _k[1];\n\n  var _l = useState(isActiveFromParent),\n      isActive = _l[0],\n      setIsActive = _l[1];\n\n  var _m = useState(false),\n      isLoaded = _m[0],\n      setIsLoaded = _m[1];\n\n  var _o = useState(false),\n      isUnloading = _o[0],\n      setIsUnloading = _o[1];\n\n  var prevIsActive = usePrevious(isActive);\n  var prevIsActiveFromParent = usePrevious(isActiveFromParent);\n  var prevIsLoaded = usePrevious(isLoaded);\n\n  var _p = useWindowSize(),\n      innerWidth = _p.width,\n      innerHeight = _p.height; // on click, tell caller it should zoom\n\n\n  var handleClick = useCallback(function (e) {\n    e.preventDefault();\n\n    if (onZoomChange) {\n      onZoomChange(false);\n    }\n  }, [onZoomChange]); // on escape, tell caller it should unzoom\n\n  var handleKeyDown = useCallback(function (e) {\n    if (isActive && (e.key === 'Escape' || e.keyCode === 27)) {\n      e.stopPropagation();\n\n      if (onZoomChange) {\n        onZoomChange(false);\n      }\n    }\n  }, [isActive, onZoomChange]);\n  var handleScroll = useCallback(function () {\n    forceUpdate(function (n) {\n      return n + 1;\n    });\n\n    if (!isUnloading && onZoomChange) {\n      onZoomChange(false);\n    }\n  }, [isUnloading, onZoomChange]); // listen for keydown on the document\n\n  useEffect(function () {\n    document.addEventListener('keydown', handleKeyDown);\n    return function () {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleKeyDown]); // listen for scroll and close\n\n  useEffect(function () {\n    var _a;\n\n    (_a = scrollableEl === null || scrollableEl === void 0 ? void 0 : scrollableEl.addEventListener) === null || _a === void 0 ? void 0 : _a.call(scrollableEl, 'scroll', handleScroll);\n    return function () {\n      var _a;\n\n      (_a = scrollableEl === null || scrollableEl === void 0 ? void 0 : scrollableEl.removeEventListener) === null || _a === void 0 ? void 0 : _a.call(scrollableEl, 'scroll', handleScroll);\n    };\n  }, [handleScroll, scrollableEl]); // set loaded on mount and focus\n\n  useEffect(function () {\n    if (!prevIsActive && isActive) {\n      setIsLoaded(true);\n\n      if (btnRef.current) {\n        btnRef.current.focus({\n          preventScroll: true\n        });\n      }\n    }\n  }, [isActive, prevIsActive]);\n  useEffect(function () {\n    // when parent says to deactivate, begin unloading process\n    if (prevIsActiveFromParent && !isActiveFromParent) {\n      setIsUnloading(true);\n    } // when parent says to activate, begin active process\n\n\n    if (!prevIsActiveFromParent && isActiveFromParent) {\n      setIsActive(true);\n    }\n  }, [isActiveFromParent, prevIsActiveFromParent]); // if unloading, tell parent that we're all done here after Nms\n\n  useEffect(function () {\n    var unloadTimeout;\n\n    if (isUnloading) {\n      unloadTimeout = setTimeout(function () {\n        setIsLoaded(false);\n        setIsActive(false);\n        setIsUnloading(false);\n      }, transitionDuration);\n    }\n\n    return function () {\n      clearTimeout(unloadTimeout);\n    };\n  }, [isUnloading, transitionDuration]); // let parent know of changes to load status\n\n  useEffect(function () {\n    if (!prevIsLoaded && isLoaded) {\n      onLoad();\n    }\n\n    if (prevIsLoaded && !isLoaded) {\n      onUnload();\n    }\n  }, [isLoaded, onLoad, onUnload, prevIsLoaded]); // use parent element or fake one if it's not yet loaded\n\n  var parentEl = parentRef.current || pseudoParentEl; // get parent element's dimensions\n\n  var _q = parentEl.getBoundingClientRect(),\n      height = _q.height,\n      left = _q.left,\n      top = _q.top,\n      width = _q.width;\n\n  var overlayStyle = getModalOverlayStyle({\n    isLoaded: isLoaded,\n    isUnloading: isUnloading,\n    overlayBgColorEnd: overlayBgColorEnd,\n    overlayBgColorStart: overlayBgColorStart,\n    transitionDuration: transitionDuration,\n    zoomZindex: zoomZindex\n  });\n  var contentStyle = getModalContentStyle({\n    height: height,\n    isLoaded: isLoaded,\n    innerHeight: innerHeight,\n    innerWidth: innerWidth,\n    isUnloading: isUnloading,\n    left: left,\n    originalTransform: parentEl.style.transform,\n    top: top,\n    transitionDuration: transitionDuration,\n    width: width,\n    zoomMargin: zoomMargin\n  });\n  return isActive ? createPortal(React.createElement(\"div\", {\n    \"aria-label\": \"Zoomed image\",\n    \"aria-modal\": true,\n    \"data-rmiz-overlay\": true,\n    role: \"dialog\",\n    style: overlayStyle\n  }, React.createElement(\"div\", {\n    \"data-rmiz-modal-content\": true,\n    style: contentStyle\n  }, children), React.createElement(\"button\", {\n    \"aria-label\": closeText,\n    \"data-rmiz-btn-close\": true,\n    onClick: handleClick,\n    ref: btnRef,\n    type: \"button\"\n  })), portalEl) : null;\n};\n\nvar ControlledActivated$1 = memo(ControlledActivated);\n\nvar Controlled = function Controlled(_a) {\n  var children = _a.children,\n      _b = _a.closeText,\n      closeText = _b === void 0 ? 'Unzoom image' : _b,\n      isActive = _a.isZoomed,\n      _c = _a.overlayBgColorEnd,\n      overlayBgColorEnd = _c === void 0 ? 'rgba(255, 255, 255, 0.95)' : _c,\n      _d = _a.overlayBgColorStart,\n      overlayBgColorStart = _d === void 0 ? 'rgba(255, 255, 255, 0)' : _d,\n      portalEl = _a.portalEl,\n      onZoomChange = _a.onZoomChange,\n      _e = _a.openText,\n      openText = _e === void 0 ? 'Zoom image' : _e,\n      scrollableEl = _a.scrollableEl,\n      _f = _a.transitionDuration,\n      transitionDuration = _f === void 0 ? 300 : _f,\n      _g = _a.wrapElement,\n      WrapElement = _g === void 0 ? 'div' : _g,\n      wrapStyle = _a.wrapStyle,\n      _h = _a.zoomMargin,\n      zoomMargin = _h === void 0 ? 0 : _h,\n      _j = _a.zoomZindex,\n      zoomZindex = _j === void 0 ? 2147483647 : _j;\n\n  var _k = useState(false),\n      isChildLoaded = _k[0],\n      setIsChildLoaded = _k[1];\n\n  var wrapRef = useRef(null);\n  var btnRef = useRef(null);\n  var handleClickTrigger = useCallback(function (e) {\n    if (!isActive && onZoomChange) {\n      e.preventDefault();\n      onZoomChange(true);\n    }\n  }, [isActive, onZoomChange]);\n  var handleChildLoad = useCallback(function () {\n    setIsChildLoaded(true);\n  }, []);\n  var handleChildUnload = useCallback(function () {\n    setIsChildLoaded(false);\n\n    if (btnRef.current) {\n      btnRef.current.focus({\n        preventScroll: true\n      });\n    }\n  }, []);\n  var wrapType = isChildLoaded ? 'hidden' : 'visible';\n  return React.createElement(StrictMode, null, React.createElement(WrapElement, {\n    \"data-rmiz-wrap\": wrapType,\n    ref: wrapRef,\n    style: wrapStyle\n  }, children, React.createElement(\"button\", {\n    \"aria-label\": openText,\n    \"data-rmiz-btn-open\": true,\n    onClick: handleClickTrigger,\n    ref: btnRef,\n    type: \"button\"\n  }), typeof window !== 'undefined' && React.createElement(ControlledActivated$1, {\n    closeText: closeText,\n    isActive: isActive,\n    onLoad: handleChildLoad,\n    onUnload: handleChildUnload,\n    onZoomChange: onZoomChange,\n    overlayBgColorEnd: overlayBgColorEnd,\n    overlayBgColorStart: overlayBgColorStart,\n    parentRef: wrapRef,\n    portalEl: portalEl,\n    scrollableEl: scrollableEl,\n    transitionDuration: transitionDuration,\n    zoomMargin: zoomMargin,\n    zoomZindex: zoomZindex\n  }, children)));\n};\n\nvar Controlled$1 = memo(Controlled);\nexport { Controlled$1 as C, useWindowSize as u };","map":{"version":3,"sources":["C:/Users/Pavan/Desktop/CAARD/ReactJS Code/node_modules/react-medium-image-zoom/dist/esm/Controlled-f6e8a5ed.js"],"names":["React","useEffect","useRef","useState","useCallback","memo","StrictMode","createPortal","pseudoParentEl","getModalOverlayStyle","getModalContentStyle","useEffectOnce","effect","useUnmount","fn","fnRef","current","useRafState","initialState","frame","_a","state","setState","setRafState","value","cancelAnimationFrame","requestAnimationFrame","useWindowSize","initialWidth","initialHeight","Infinity","isBrowser","window","width","innerWidth","height","innerHeight","handler_1","addEventListener","removeEventListener","usePrevious","ref","ControlledActivated","children","_b","closeText","isActiveFromParent","isActive","onLoad","onUnload","onZoomChange","_c","overlayBgColorEnd","_d","overlayBgColorStart","parentRef","_e","portalEl","document","body","_f","scrollableEl","_g","transitionDuration","_h","zoomMargin","_j","zoomZindex","btnRef","_k","forceUpdate","_l","setIsActive","_m","isLoaded","setIsLoaded","_o","isUnloading","setIsUnloading","prevIsActive","prevIsActiveFromParent","prevIsLoaded","_p","handleClick","e","preventDefault","handleKeyDown","key","keyCode","stopPropagation","handleScroll","n","call","focus","preventScroll","unloadTimeout","setTimeout","clearTimeout","parentEl","_q","getBoundingClientRect","left","top","overlayStyle","contentStyle","originalTransform","style","transform","createElement","role","onClick","type","ControlledActivated$1","Controlled","isZoomed","openText","wrapElement","WrapElement","wrapStyle","isChildLoaded","setIsChildLoaded","wrapRef","handleClickTrigger","handleChildLoad","handleChildUnload","wrapType","Controlled$1","C","u"],"mappings":"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","sourcesContent":["import 'focus-options-polyfill';\nimport React, { useEffect, useRef, useState, useCallback, memo, StrictMode } from 'react';\nimport { createPortal } from 'react-dom';\nimport { pseudoParentEl, getModalOverlayStyle, getModalContentStyle } from './helpers.js';\n\n// https://github.com/streamich/react-use/blob/master/src/useEffectOnce.ts\r\nvar useEffectOnce = function (effect) {\r\n    useEffect(effect, []); // eslint-disable-line\r\n};\n\n// https://github.com/streamich/react-use/blob/master/src/useUnmount.ts\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nvar useUnmount = function (fn) {\r\n    var fnRef = useRef(fn);\r\n    // update the ref each render so if it change the newest callback will be invoked\r\n    fnRef.current = fn;\r\n    useEffectOnce(function () { return function () { return fnRef.current(); }; });\r\n};\n\n// https://github.com/streamich/react-use/blob/master/src/useRafState.ts\r\nvar useRafState = function (initialState) {\r\n    var frame = useRef(0);\r\n    var _a = useState(initialState), state = _a[0], setState = _a[1];\r\n    var setRafState = useCallback(function (value) {\r\n        cancelAnimationFrame(frame.current);\r\n        frame.current = requestAnimationFrame(function () {\r\n            setState(value);\r\n        });\r\n    }, []);\r\n    useUnmount(function () {\r\n        cancelAnimationFrame(frame.current);\r\n    });\r\n    return [state, setRafState];\r\n};\n\n// https://github.com/streamich/react-use/blob/master/src/useWindowSize.ts\r\nvar useWindowSize = function (initialWidth, initialHeight) {\r\n    if (initialWidth === void 0) { initialWidth = Infinity; }\r\n    if (initialHeight === void 0) { initialHeight = Infinity; }\r\n    var isBrowser = typeof window !== 'undefined';\r\n    var _a = useRafState({\r\n        width: isBrowser ? window.innerWidth : initialWidth,\r\n        height: isBrowser ? window.innerHeight : initialHeight,\r\n    }), state = _a[0], setState = _a[1];\r\n    useEffect(function () {\r\n        if (isBrowser) {\r\n            var handler_1 = function () {\r\n                setState({\r\n                    width: window.innerWidth,\r\n                    height: window.innerHeight,\r\n                });\r\n            };\r\n            window.addEventListener('resize', handler_1);\r\n            return function () {\r\n                window.removeEventListener('resize', handler_1);\r\n            };\r\n        }\r\n    }, [isBrowser, setState]);\r\n    return state;\r\n};\n\n// https://github.com/streamich/react-use/blob/master/src/usePrevious.ts\r\nfunction usePrevious(state) {\r\n    var ref = useRef();\r\n    useEffect(function () {\r\n        ref.current = state;\r\n    });\r\n    return ref.current;\r\n}\n\nvar ControlledActivated = function (_a) {\r\n    var children = _a.children, _b = _a.closeText, closeText = _b === void 0 ? 'Unzoom Image' : _b, isActiveFromParent = _a.isActive, onLoad = _a.onLoad, onUnload = _a.onUnload, onZoomChange = _a.onZoomChange, _c = _a.overlayBgColorEnd, overlayBgColorEnd = _c === void 0 ? 'rgba(255, 255, 255, 0.95)' : _c, _d = _a.overlayBgColorStart, overlayBgColorStart = _d === void 0 ? 'rgba(255, 255, 255, 0)' : _d, parentRef = _a.parentRef, _e = _a.portalEl, portalEl = _e === void 0 ? document.body : _e, _f = _a.scrollableEl, scrollableEl = _f === void 0 ? window : _f, _g = _a.transitionDuration, transitionDuration = _g === void 0 ? 300 : _g, _h = _a.zoomMargin, zoomMargin = _h === void 0 ? 0 : _h, _j = _a.zoomZindex, zoomZindex = _j === void 0 ? 2147483647 : _j;\r\n    var btnRef = useRef(null);\r\n    var _k = useState(0), forceUpdate = _k[1];\r\n    var _l = useState(isActiveFromParent), isActive = _l[0], setIsActive = _l[1];\r\n    var _m = useState(false), isLoaded = _m[0], setIsLoaded = _m[1];\r\n    var _o = useState(false), isUnloading = _o[0], setIsUnloading = _o[1];\r\n    var prevIsActive = usePrevious(isActive);\r\n    var prevIsActiveFromParent = usePrevious(isActiveFromParent);\r\n    var prevIsLoaded = usePrevious(isLoaded);\r\n    var _p = useWindowSize(), innerWidth = _p.width, innerHeight = _p.height;\r\n    // on click, tell caller it should zoom\r\n    var handleClick = useCallback(function (e) {\r\n        e.preventDefault();\r\n        if (onZoomChange) {\r\n            onZoomChange(false);\r\n        }\r\n    }, [onZoomChange]);\r\n    // on escape, tell caller it should unzoom\r\n    var handleKeyDown = useCallback(function (e) {\r\n        if (isActive && (e.key === 'Escape' || e.keyCode === 27)) {\r\n            e.stopPropagation();\r\n            if (onZoomChange) {\r\n                onZoomChange(false);\r\n            }\r\n        }\r\n    }, [isActive, onZoomChange]);\r\n    var handleScroll = useCallback(function () {\r\n        forceUpdate(function (n) { return n + 1; });\r\n        if (!isUnloading && onZoomChange) {\r\n            onZoomChange(false);\r\n        }\r\n    }, [isUnloading, onZoomChange]);\r\n    // listen for keydown on the document\r\n    useEffect(function () {\r\n        document.addEventListener('keydown', handleKeyDown);\r\n        return function () {\r\n            document.removeEventListener('keydown', handleKeyDown);\r\n        };\r\n    }, [handleKeyDown]);\r\n    // listen for scroll and close\r\n    useEffect(function () {\r\n        var _a;\r\n        (_a = scrollableEl === null || scrollableEl === void 0 ? void 0 : scrollableEl.addEventListener) === null || _a === void 0 ? void 0 : _a.call(scrollableEl, 'scroll', handleScroll);\r\n        return function () {\r\n            var _a;\r\n            (_a = scrollableEl === null || scrollableEl === void 0 ? void 0 : scrollableEl.removeEventListener) === null || _a === void 0 ? void 0 : _a.call(scrollableEl, 'scroll', handleScroll);\r\n        };\r\n    }, [handleScroll, scrollableEl]);\r\n    // set loaded on mount and focus\r\n    useEffect(function () {\r\n        if (!prevIsActive && isActive) {\r\n            setIsLoaded(true);\r\n            if (btnRef.current) {\r\n                btnRef.current.focus({ preventScroll: true });\r\n            }\r\n        }\r\n    }, [isActive, prevIsActive]);\r\n    useEffect(function () {\r\n        // when parent says to deactivate, begin unloading process\r\n        if (prevIsActiveFromParent && !isActiveFromParent) {\r\n            setIsUnloading(true);\r\n        }\r\n        // when parent says to activate, begin active process\r\n        if (!prevIsActiveFromParent && isActiveFromParent) {\r\n            setIsActive(true);\r\n        }\r\n    }, [isActiveFromParent, prevIsActiveFromParent]);\r\n    // if unloading, tell parent that we're all done here after Nms\r\n    useEffect(function () {\r\n        var unloadTimeout;\r\n        if (isUnloading) {\r\n            unloadTimeout = setTimeout(function () {\r\n                setIsLoaded(false);\r\n                setIsActive(false);\r\n                setIsUnloading(false);\r\n            }, transitionDuration);\r\n        }\r\n        return function () {\r\n            clearTimeout(unloadTimeout);\r\n        };\r\n    }, [isUnloading, transitionDuration]);\r\n    // let parent know of changes to load status\r\n    useEffect(function () {\r\n        if (!prevIsLoaded && isLoaded) {\r\n            onLoad();\r\n        }\r\n        if (prevIsLoaded && !isLoaded) {\r\n            onUnload();\r\n        }\r\n    }, [isLoaded, onLoad, onUnload, prevIsLoaded]);\r\n    // use parent element or fake one if it's not yet loaded\r\n    var parentEl = parentRef.current || pseudoParentEl;\r\n    // get parent element's dimensions\r\n    var _q = parentEl.getBoundingClientRect(), height = _q.height, left = _q.left, top = _q.top, width = _q.width;\r\n    var overlayStyle = getModalOverlayStyle({\r\n        isLoaded: isLoaded,\r\n        isUnloading: isUnloading,\r\n        overlayBgColorEnd: overlayBgColorEnd,\r\n        overlayBgColorStart: overlayBgColorStart,\r\n        transitionDuration: transitionDuration,\r\n        zoomZindex: zoomZindex,\r\n    });\r\n    var contentStyle = getModalContentStyle({\r\n        height: height,\r\n        isLoaded: isLoaded,\r\n        innerHeight: innerHeight,\r\n        innerWidth: innerWidth,\r\n        isUnloading: isUnloading,\r\n        left: left,\r\n        originalTransform: parentEl.style.transform,\r\n        top: top,\r\n        transitionDuration: transitionDuration,\r\n        width: width,\r\n        zoomMargin: zoomMargin,\r\n    });\r\n    return isActive\r\n        ? createPortal(React.createElement(\"div\", { \"aria-label\": \"Zoomed image\", \"aria-modal\": true, \"data-rmiz-overlay\": true, role: \"dialog\", style: overlayStyle },\r\n            React.createElement(\"div\", { \"data-rmiz-modal-content\": true, style: contentStyle }, children),\r\n            React.createElement(\"button\", { \"aria-label\": closeText, \"data-rmiz-btn-close\": true, onClick: handleClick, ref: btnRef, type: \"button\" })), portalEl)\r\n        : null;\r\n};\r\nvar ControlledActivated$1 = memo(ControlledActivated);\n\nvar Controlled = function (_a) {\r\n    var children = _a.children, _b = _a.closeText, closeText = _b === void 0 ? 'Unzoom image' : _b, isActive = _a.isZoomed, _c = _a.overlayBgColorEnd, overlayBgColorEnd = _c === void 0 ? 'rgba(255, 255, 255, 0.95)' : _c, _d = _a.overlayBgColorStart, overlayBgColorStart = _d === void 0 ? 'rgba(255, 255, 255, 0)' : _d, portalEl = _a.portalEl, onZoomChange = _a.onZoomChange, _e = _a.openText, openText = _e === void 0 ? 'Zoom image' : _e, scrollableEl = _a.scrollableEl, _f = _a.transitionDuration, transitionDuration = _f === void 0 ? 300 : _f, _g = _a.wrapElement, WrapElement = _g === void 0 ? 'div' : _g, wrapStyle = _a.wrapStyle, _h = _a.zoomMargin, zoomMargin = _h === void 0 ? 0 : _h, _j = _a.zoomZindex, zoomZindex = _j === void 0 ? 2147483647 : _j;\r\n    var _k = useState(false), isChildLoaded = _k[0], setIsChildLoaded = _k[1];\r\n    var wrapRef = useRef(null);\r\n    var btnRef = useRef(null);\r\n    var handleClickTrigger = useCallback(function (e) {\r\n        if (!isActive && onZoomChange) {\r\n            e.preventDefault();\r\n            onZoomChange(true);\r\n        }\r\n    }, [isActive, onZoomChange]);\r\n    var handleChildLoad = useCallback(function () {\r\n        setIsChildLoaded(true);\r\n    }, []);\r\n    var handleChildUnload = useCallback(function () {\r\n        setIsChildLoaded(false);\r\n        if (btnRef.current) {\r\n            btnRef.current.focus({ preventScroll: true });\r\n        }\r\n    }, []);\r\n    var wrapType = isChildLoaded ? 'hidden' : 'visible';\r\n    return (React.createElement(StrictMode, null,\r\n        React.createElement(WrapElement, { \"data-rmiz-wrap\": wrapType, ref: wrapRef, style: wrapStyle },\r\n            children,\r\n            React.createElement(\"button\", { \"aria-label\": openText, \"data-rmiz-btn-open\": true, onClick: handleClickTrigger, ref: btnRef, type: \"button\" }),\r\n            typeof window !== 'undefined' && (React.createElement(ControlledActivated$1, { closeText: closeText, isActive: isActive, onLoad: handleChildLoad, onUnload: handleChildUnload, onZoomChange: onZoomChange, overlayBgColorEnd: overlayBgColorEnd, overlayBgColorStart: overlayBgColorStart, parentRef: wrapRef, portalEl: portalEl, scrollableEl: scrollableEl, transitionDuration: transitionDuration, zoomMargin: zoomMargin, zoomZindex: zoomZindex }, children)))));\r\n};\r\nvar Controlled$1 = memo(Controlled);\n\nexport { Controlled$1 as C, useWindowSize as u };\n"]},"metadata":{},"sourceType":"module"}